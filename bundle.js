(()=>{"use strict";const t=async function(t){var r;let e="https://stormy-tor-99017.herokuapp.com/https://pypi.org/pypi/"+t+"/json";return await fetch(e).then((t=>t.json())).then((t=>r=t)),function(t){let r,e=t.info.project_urls.Documentation,n=t.info.project_urls.Homepage;return r=null!==e?e:n,{url:r,description:t.info.summary}}(r)};function r(t,r){return t.score.final<r.score.final?-1:t.score.final>r.score.final?1:0}const e=async function(t,e=!0){var n;if(e){let e="https://stormy-tor-99017.herokuapp.com/https://registry.npmjs.org/-/v1/search?text="+t;await fetch(e).then((t=>t.json())).then((t=>n=t)),n.total>0&&((n=n.objects).sort(r),n.reverse(),t=n[0].package.name)}let o="https://stormy-tor-99017.herokuapp.com/https://registry.npmjs.org/"+t;return await fetch(o).then((t=>t.json())).then((t=>n=t)),"homepage"in n?{description:n.description,url:n.homepage}:"repository"in n?{description:n.description,url:n.repository.url.substring(4,n.repository.url.length)}:"error"in n?{description:"",url:"https://www.npmjs.com/package/"+t.split(".")[0]}:{description:n.description.endsWith(".")?n.description:n.description+".",url:"https://www.npmjs.com/package/"+t.split(".")[0]}};chrome.omnibox.setDefaultSuggestion({description:"Search any .js or .py library"}),chrome.omnibox.onInputChanged.addListener(((r,n)=>{if(r.includes(".")){var o=r.split(".")[0],s=r.split(".")[1];"py"==s?(t(r).then((t=>{t.url.length?n([{content:r+".py",description:r+": "+t.description+". <url>"+t.url+"</url>"}]):n([])})),t(o).then((t=>{t.url.length?n([{content:r+".py",description:r+".py: "+t.description+". <url>"+t.url+"</url>"}]):n([])}))):"js"==s&&e(o).then((t=>{t.url.length?n([{content:r+".js",description:r+".js: "+t.description+" <url>"+t.url+"</url>"}]):n([])}))}else e(r).then((t=>{t.url.length?n([{content:r+".js",description:r+".js: "+t.description+" <url>"+t.url+"</url>"}]):n([])})),t(r).then((t=>{t.url.length?n([{content:r+".py",description:r+".py: "+t.description+". <url>"+t.url+"</url>"}]):n([])}))})),chrome.omnibox.onInputEntered.addListener((r=>{var n=r.split(".")[0],o=r.split(".")[1];"py"==o?(t(r).then((t=>chrome.tabs.update({url:t.url}))),t(n).then((t=>chrome.tabs.update({url:t.url})))):"js"==o&&e(n).then((t=>chrome.tabs.update({url:t.url})))}))})();